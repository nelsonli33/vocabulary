<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>會員登入</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
<!-- Font Awesome -->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<!-- Popper JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>
<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>	

<link rel="stylesheet" href="/css/basic.css" th:href="@{/css/basic.css}">


</head>
<body>
<div th:replace="fragments/navbar :: navbar"></div>

<div class="basic">	
<div class="box login">
   <div class="container">

   		<table cellpadding="10">
				<tbody>
					<tr>
						<td>帳號：</td>
						<td><input type="text" id="accountInput" maxlength="12" /></td>
					</tr>
					<tr>
						<td>密碼：</td>
						<td><input type="password" id="passwordInput" maxlength="24"/></td>
					</tr>
					<tr>
						<td></td>
						<td><button id="btn-login" class="btn" type="submit" onclick="login()">登入</button></td>
					</tr>

					<div id="loginInfo"></div>
				</tbody>
		</table>
   </div>
</div>
</div>


<script>
	
	
	// $('#btn-login').prop('disabled', false);
		
	// 輸入完密碼 可以按Enter登入
	$('#passwordInput').keypress(function (e) {
 	var key = e.which;
 	if(key == 13)  
 	 {
 	   $('#btn-login').click(); // the enter key code
	 }
	}); 



	function login(){

		user = {};
		user["account"] = $('#accountInput').val();
		user["password"] = $('#passwordInput').val();
		console.log(user);

		$.ajax({
			url: window.location.origin+'/users/api/userLogin',
			type: 'POST',
			data: JSON.stringify(user),
			contentType: "application/json; charset=utf-8",
		})
		.done(function(data) {
			
			console.log("success");

			if( data == true){
				console.log("登入成功");
				$('#loginInfo').html('<p>登入成功!</p>');
				window.location.href="/user/vocabulary/statistic";
			} else {
				console.log("登入失敗");
				$('#loginInfo').html('<p>登入失敗!</p>');
			}
			
		})
		.fail(function() {
			console.log("error");
		})

	}
	

</script>
</body>
</html>